import{o as T,v as L,w as m,x as B,y,z as I,A as p,B as U,C as Y,D as k,E as x,F,G as C,H as $,I as z,J as G,K as H,L as R,M as O,N as Z,O as q,P as J,g,Q as K,R as Q,T as D,U as V,V as W,W as X,X as j,Y as ee,Z as te,i as se,_ as re,$ as ae,u as ie,a0 as ne,a1 as fe,a2 as ue,a3 as ce,a4 as de,S as oe,a5 as _e}from"./BYhrCfAH.js";class le{anchor;#t=new Map;#s=new Map;#e=new Map;#r=new Set;#a=!0;constructor(t,r=!0){this.anchor=t,this.#a=r}#i=()=>{var t=T;if(this.#t.has(t)){var r=this.#t.get(t),e=this.#s.get(r);if(e)L(e),this.#r.delete(r);else{var i=this.#e.get(r);i&&(this.#s.set(r,i.effect),this.#e.delete(r),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),e=i.effect)}for(const[a,f]of this.#t){if(this.#t.delete(a),a===t)break;const n=this.#e.get(f);n&&(m(n.effect),this.#e.delete(f))}for(const[a,f]of this.#s){if(a===r||this.#r.has(a))continue;const n=()=>{if(Array.from(this.#t.values()).includes(a)){var d=document.createDocumentFragment();Y(f,d),d.append(y()),this.#e.set(a,{effect:f,fragment:d})}else m(f);this.#r.delete(a),this.#s.delete(a)};this.#a||!e?(this.#r.add(a),B(f,n,!1)):n()}}};#n=t=>{this.#t.delete(t);const r=Array.from(this.#t.values());for(const[e,i]of this.#e)r.includes(e)||(m(i.effect),this.#e.delete(e))};ensure(t,r){var e=T,i=k();if(r&&!this.#s.has(t)&&!this.#e.has(t))if(i){var a=document.createDocumentFragment(),f=y();a.append(f),this.#e.set(t,{effect:I(()=>r(f)),fragment:a})}else this.#s.set(t,I(()=>r(this.anchor)));if(this.#t.set(e,t),i){for(const[n,u]of this.#s)n===t?e.skipped_effects.delete(u):e.skipped_effects.add(u);for(const[n,u]of this.#e)n===t?e.skipped_effects.delete(u.effect):e.skipped_effects.add(u.effect);e.oncommit(this.#i),e.ondiscard(this.#n)}else p&&(this.anchor=U),this.#i()}}function be(s,t,r=!1){p&&F();var e=new le(s),i=r?C:0;function a(f,n){if(p){const d=$(s)===z;if(f===d){var u=G();H(u),e.anchor=u,R(!1),e.ensure(f,n),R(!0);return}}e.ensure(f,n)}x(()=>{var f=!1;t((n,u=!0)=>{f=!0,a(u,n)}),f||a(!1,null)},i)}let b=!1,E=Symbol();function ge(s,t,r){const e=r[t]??={store:null,source:Z(void 0),unsubscribe:O};if(e.store!==s&&!(E in r))if(e.unsubscribe(),e.store=s??null,s==null)e.source.v=void 0,e.unsubscribe=O;else{var i=!0;e.unsubscribe=q(s,a=>{i?e.source.v=a:D(e.source,a)}),i=!1}return s&&E in r?J(s):g(e.source)}function Se(s,t){return s.set(t),t}function me(){const s={};function t(){K(()=>{for(var r in s)s[r].unsubscribe();Q(s,E,{enumerable:!1,value:!0})})}return[s,t]}function he(s){var t=b;try{return b=!1,[s(),b]}finally{b=t}}function pe(s,t,r,e){var i=!ne||(r&fe)!==0,a=(r&ae)!==0,f=(r&ce)!==0,n=e,u=!0,d=()=>(u&&(u=!1,n=f?ie(e):e),n),_;if(a){var M=oe in s||_e in s;_=V(s,t)?.set??(M&&t in s?c=>s[t]=c:void 0)}var l,P=!1;a?[l,P]=he(()=>s[t]):l=s[t],l===void 0&&e!==void 0&&(l=d(),_&&(i&&W(),_(l)));var o;if(i?o=()=>{var c=s[t];return c===void 0?d():(u=!0,c)}:o=()=>{var c=s[t];return c!==void 0&&(n=void 0),c===void 0?n:c},i&&(r&X)===0)return o;if(_){var N=s.$$legacy;return(function(c,v){return arguments.length>0?((!i||!v||N||P)&&_(v?o():c),c):o()})}var S=!1,h=((r&ue)!==0?se:re)(()=>(S=!1,o()));a&&g(h);var w=ee;return(function(c,v){if(arguments.length>0){const A=v?g(h):i&&a?j(c):c;return D(h,A),S=!0,n!==void 0&&(n=A),c}return de&&S||(w.f&te)!==0?h.v:g(h)})}export{le as B,me as a,Se as b,be as i,pe as p,ge as s};
